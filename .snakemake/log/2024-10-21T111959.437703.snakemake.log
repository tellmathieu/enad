Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 20
Rules claiming more threads will be scaled down.
Provided resources: mem_mb=50000
Job stats:
job                                    count
-----------------------------------  -------
alignToChainOfGenomes                      5
alignToReference                           6
all                                        1
changeNCtoChr                              6
correct                                    2
makeGenomeFileForPlotSR                    6
plotStructuralRearrangement                6
plotStructuralRearrangementCombined        1
removeRagTag                               5
sameChrNames                               5
scaffold                                   5
syntenyAnalysis                            6
syntenyAnalysisForCombined                 5
total                                     59

Select jobs to execute...

[Mon Oct 21 11:20:01 2024]
rule changeNCtoChr:
    input: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_01_200/horse_01_200_scaffold_chr.fa, /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/chr.accesssion.list.txt, /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/reference_genome_chr_only.fa
    output: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_01_200/horse_01_200_scaffold_chr_only.fa, /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_01_200/horse_01_200_ref_chr_only.fa
    jobid: 51
    reason: Updated input files: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_01_200/horse_01_200_scaffold_chr.fa
    wildcards: sample=horse_01_200
    resources: tmpdir=/tmp


    cp /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_01_200/horse_01_200_scaffold_chr.fa /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_01_200/horse_01_200_scaffold_chr_only.fa
    cp /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/reference_genome_chr_only.fa /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_01_200/horse_01_200_ref_chr_only.fa
    horse_01_200lines=$(wc -l /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/chr.accesssion.list.txt | awk '{ print $1 }')
    horse_01_200currentline=1
    while [ "$horse_01_200currentline" -le "$horse_01_200lines" ]
    do
      horse_01_200chr=$(sed "${horse_01_200currentline}q;d" /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/chr.accesssion.list.txt | awk '{ print $1 }')
      horse_01_200nc=$(sed "${horse_01_200currentline}q;d" /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/chr.accesssion.list.txt | awk '{ print $2 }')
      sed -i "s/${horse_01_200nc}/${horse_01_200chr}/g" /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_01_200/horse_01_200_scaffold_chr_only.fa
      horse_01_200currentline=$(($horse_01_200currentline+1))
    done
  

[Mon Oct 21 11:20:01 2024]
rule correct:
    input: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/busco.pdf, /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_03_238/horse_03_238.asm.bp.p_ctg.fa, /home/tmathieu/eNAD/resources/GCF_002863925.1_EquCab3.0_genomic.fna
    output: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/ragtag.correct.fasta
    jobid: 7
    reason: Missing output files: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/ragtag.correct.fasta
    wildcards: sample=horse_03_238
    resources: tmpdir=/tmp, mem_mb=50000, mem_mib=47684


    ragtag.py correct       -u       -o horse_03_238       /home/tmathieu/eNAD/resources/GCF_002863925.1_EquCab3.0_genomic.fna       /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_03_238/horse_03_238.asm.bp.p_ctg.fa
  
[Mon Oct 21 11:20:21 2024]
Finished job 51.
1 of 59 steps (2%) done
Select jobs to execute...
[Mon Oct 21 11:20:51 2024]
Finished job 7.
2 of 59 steps (3%) done

[Mon Oct 21 11:20:51 2024]
rule scaffold:
    input: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/ragtag.correct.fasta, /home/tmathieu/eNAD/resources/GCF_002863925.1_EquCab3.0_genomic.fna
    output: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/ragtag.scaffold.fasta
    jobid: 6
    reason: Input files updated by another job: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/ragtag.correct.fasta; Set of input files has changed since last execution; Code has changed since last execution
    wildcards: sample=horse_03_238
    resources: tmpdir=/tmp, mem_mb=50000, mem_mib=47684


    ragtag.py scaffold       -u       -o horse_03_238       /home/tmathieu/eNAD/resources/GCF_002863925.1_EquCab3.0_genomic.fna       /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/ragtag.correct.fasta
  
[Mon Oct 21 11:21:29 2024]
Finished job 6.
3 of 59 steps (5%) done
Select jobs to execute...

[Mon Oct 21 11:21:30 2024]
rule removeRagTag:
    input: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/ragtag.scaffold.fasta
    output: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/horse_03_238_rename.scaffold.fasta
    jobid: 5
    reason: Input files updated by another job: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/ragtag.scaffold.fasta
    wildcards: sample=horse_03_238
    resources: tmpdir=/tmp


    sed 's/_RagTag//' /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/ragtag.scaffold.fasta > /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/horse_03_238_rename.scaffold.fasta
  

[Mon Oct 21 11:21:30 2024]
rule alignToReference:
    input: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_01_200/horse_01_200_scaffold_chr_only.fa, /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_01_200/horse_01_200_ref_chr_only.fa
    output: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_01_200/horse_01_200_comparison.sam
    jobid: 56
    reason: Input files updated by another job: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_01_200/horse_01_200_scaffold_chr_only.fa, /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_01_200/horse_01_200_ref_chr_only.fa
    wildcards: sample=horse_01_200
    resources: tmpdir=/tmp, mem_mb=50000, mem_mib=47684


    minimap2       -a       -x asm5       --eqx       /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_01_200/horse_01_200_ref_chr_only.fa       /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_01_200/horse_01_200_scaffold_chr_only.fa       > /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_01_200/horse_01_200_comparison.sam
  
[Mon Oct 21 11:21:30 2024]
Finished job 5.
4 of 59 steps (7%) done
Select jobs to execute...

[Mon Oct 21 11:21:30 2024]
rule sameChrNames:
    input: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/horse_03_238_rename.scaffold.fasta, /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/chr.accesssion.list.txt, /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/cleaned_ref_genome.fa
    output: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/horse_03_238_scaffold_chr.fa
    jobid: 4
    reason: Input files updated by another job: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/horse_03_238_rename.scaffold.fasta
    wildcards: sample=horse_03_238
    resources: tmpdir=/tmp


    horse_03_238lines=$(wc -l /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/chr.accesssion.list.txt | awk '{ print $1 }')
    horse_03_238currentline=1
    while [ "$horse_03_238currentline" -le "$horse_03_238lines" ]
    do
      horse_03_238name=$(sed "${horse_03_238currentline}q;d" /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/chr.accesssion.list.txt | awk '{ print $2 }')
      grep -A1 "${horse_03_238name}" /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/horse_03_238_rename.scaffold.fasta >> /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/horse_03_238_scaffold_chr.fa
      horse_03_238currentline=$(($horse_03_238currentline+1))
    done
  
[Mon Oct 21 11:21:30 2024]
Error in rule sameChrNames:
    jobid: 4
    input: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/horse_03_238_rename.scaffold.fasta, /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/chr.accesssion.list.txt, /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/cleaned_ref_genome.fa
    output: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/horse_03_238_scaffold_chr.fa
    shell:
        
    horse_03_238lines=$(wc -l /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/chr.accesssion.list.txt | awk '{ print $1 }')
    horse_03_238currentline=1
    while [ "$horse_03_238currentline" -le "$horse_03_238lines" ]
    do
      horse_03_238name=$(sed "${horse_03_238currentline}q;d" /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/chr.accesssion.list.txt | awk '{ print $2 }')
      grep -A1 "${horse_03_238name}" /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/horse_03_238_rename.scaffold.fasta >> /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/horse_03_238_scaffold_chr.fa
      horse_03_238currentline=$(($horse_03_238currentline+1))
    done
  
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Removing output files of failed job sameChrNames since they might be corrupted:
/group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_03_238/horse_03_238_scaffold_chr.fa
[Mon Oct 21 11:22:28 2024]
Finished job 56.
5 of 59 steps (8%) done
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: .snakemake/log/2024-10-21T111959.437703.snakemake.log
