Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 20
Rules claiming more threads will be scaled down.
Provided resources: mem_mb=200000
Job stats:
job                         count
------------------------  -------
all                             1
create_coverage_plot            6
create_coverage_table           6
de_novo_faassembly_stats        6
de_novo_gfa_to_fa               4
initial_assembly                4
total                          27

Select jobs to execute...
Execute 5 jobs...

[Tue Aug 20 13:34:43 2024]
localrule create_coverage_table:
    input: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_01_200/horse_01_200.asm.bp.p_ctg.fa
    output: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_01_200/horse_01_200.length.csv
    jobid: 21
    reason: Code has changed since last execution
    wildcards: sample=horse_01_200
    resources: tmpdir=/tmp


		#create csv file with headers
		echo "line,length,type,coverage" > /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_01_200/horse_01_200.length.csv

		#subcommand
		LEN1=`bioawk -c fastx '{sum+=length($seq)}END{print sum}' /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_01_200/horse_01_200.asm.bp.p_ctg.fa`

		#adding length lines to csv we created
		cat /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_01_200/horse_01_200.asm.bp.p_ctg.fa | bioawk -c fastx -v line="HIFI" '{print line","length($seq)","length ($seq)}' | sort -k3rV -t "," | awk -F "," -v len="$LEN1" -v type="contig" 'OFS=","{print $1,$2,type,(sum+0)/len; sum+=$3 }' >> /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_01_200/horse_01_200.length.csv
	

[Tue Aug 20 13:34:43 2024]
localrule create_coverage_table:
    input: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_02_205/horse_02_205.asm.bp.p_ctg.fa
    output: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_02_205/horse_02_205.length.csv
    jobid: 24
    reason: Code has changed since last execution
    wildcards: sample=horse_02_205
    resources: tmpdir=/tmp


		#create csv file with headers
		echo "line,length,type,coverage" > /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_02_205/horse_02_205.length.csv

		#subcommand
		LEN1=`bioawk -c fastx '{sum+=length($seq)}END{print sum}' /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_02_205/horse_02_205.asm.bp.p_ctg.fa`

		#adding length lines to csv we created
		cat /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_02_205/horse_02_205.asm.bp.p_ctg.fa | bioawk -c fastx -v line="HIFI" '{print line","length($seq)","length ($seq)}' | sort -k3rV -t "," | awk -F "," -v len="$LEN1" -v type="contig" 'OFS=","{print $1,$2,type,(sum+0)/len; sum+=$3 }' >> /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_02_205/horse_02_205.length.csv
	

[Tue Aug 20 13:34:43 2024]
localrule initial_assembly:
    input: /home/tmathieu/eNAD/fastq/horse_06_1212.fastq
    output: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_06_1212/horse_06_1212.asm.bp.p_ctg.gfa
    jobid: 8
    reason: Code has changed since last execution
    wildcards: sample=horse_06_1212
    resources: tmpdir=/tmp, mem_mb=200000, mem_mib=190735


		mkdir -p /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_06_1212

		#de novo assembly
		hifiasm -o /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_06_1212/horse_06_1212.asm -t 20 /home/tmathieu/eNAD/fastq/horse_06_1212.fastq
	

[Tue Aug 20 13:34:43 2024]
localrule de_novo_faassembly_stats:
    input: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_01_200/horse_01_200.asm.bp.p_ctg.fa
    output: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_01_200/horse_01_200.asm.bp.p_ctg.fa.txt
    jobid: 15
    reason: Code has changed since last execution
    wildcards: sample=horse_01_200
    resources: tmpdir=/tmp


		assembly-stats /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_01_200/horse_01_200.asm.bp.p_ctg.fa > /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_01_200/horse_01_200.asm.bp.p_ctg.fa.txt
	

[Tue Aug 20 13:34:43 2024]
localrule de_novo_faassembly_stats:
    input: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_02_205/horse_02_205.asm.bp.p_ctg.fa
    output: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_02_205/horse_02_205.asm.bp.p_ctg.fa.txt
    jobid: 18
    reason: Code has changed since last execution
    wildcards: sample=horse_02_205
    resources: tmpdir=/tmp


		assembly-stats /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_02_205/horse_02_205.asm.bp.p_ctg.fa > /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_02_205/horse_02_205.asm.bp.p_ctg.fa.txt
	
[Tue Aug 20 13:35:17 2024]
Finished job 18.
1 of 27 steps (4%) done
Select jobs to execute...
[Tue Aug 20 13:35:19 2024]
Finished job 15.
2 of 27 steps (7%) done
[Tue Aug 20 13:35:35 2024]
Finished job 24.
3 of 27 steps (11%) done
Execute 1 jobs...

[Tue Aug 20 13:35:35 2024]
localrule create_coverage_plot:
    input: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_02_205/horse_02_205.length.csv
    output: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_02_205/horse_02_205.coverage.pdf
    jobid: 30
    reason: Missing output files: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_02_205/horse_02_205.coverage.pdf; Input files updated by another job: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_02_205/horse_02_205.length.csv
    wildcards: sample=horse_02_205
    resources: tmpdir=/tmp


		Rscript /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/scripts/coveragePlot.R 			/group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_02_205/horse_02_205.length.csv 			/group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_02_205/horse_02_205.coverage.pdf
		
[Tue Aug 20 13:35:38 2024]
Finished job 30.
4 of 27 steps (15%) done
Select jobs to execute...
[Tue Aug 20 13:35:39 2024]
Finished job 21.
5 of 27 steps (19%) done
Execute 1 jobs...

[Tue Aug 20 13:35:39 2024]
localrule create_coverage_plot:
    input: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_01_200/horse_01_200.length.csv
    output: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_01_200/horse_01_200.coverage.pdf
    jobid: 27
    reason: Missing output files: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_01_200/horse_01_200.coverage.pdf; Input files updated by another job: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_01_200/horse_01_200.length.csv
    wildcards: sample=horse_01_200
    resources: tmpdir=/tmp


		Rscript /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/scripts/coveragePlot.R 			/group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_01_200/horse_01_200.length.csv 			/group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_01_200/horse_01_200.coverage.pdf
		
[Tue Aug 20 13:35:41 2024]
Finished job 27.
6 of 27 steps (22%) done
Select jobs to execute...
[Tue Aug 20 13:39:03 2024]
Error in rule initial_assembly:
    jobid: 8
    input: /home/tmathieu/eNAD/fastq/horse_06_1212.fastq
    output: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_06_1212/horse_06_1212.asm.bp.p_ctg.gfa
    shell:
        
		mkdir -p /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_06_1212

		#de novo assembly
		hifiasm -o /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_06_1212/horse_06_1212.asm -t 20 /home/tmathieu/eNAD/fastq/horse_06_1212.fastq
	
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: .snakemake/log/2024-08-20T133440.379853.snakemake.log
WorkflowError:
At least one job did not complete successfully.
