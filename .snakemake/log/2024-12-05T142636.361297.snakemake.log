Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 20
Rules claiming more threads will be scaled down.
Provided resources: mem_mb=50000
Job stats:
job                      count
---------------------  -------
alignToChainOfGenomes        2
alignToFirstControl         12
all                          1
buscoRscript                 1
changeNCtoChr               12
changeNCtoChrPrimary         1
combineBUSCO                 1
compareSVs                   1
convertSamToBam             12
correct                     12
correctPrimary               1
findSVs                     12
indexBam                    12
parseBUSCO                  12
plotSVs                      1
removeRagTag                12
removeRagTagPrimary          1
sameChrNames                12
sameChrNamesPrimary          1
scaffold                    12
scaffoldPrimary              1
sortBam                     12
total                      144

Select jobs to execute...

[Thu Dec  5 14:26:42 2024]
rule parseBUSCO:
    input: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_04_56.hap2/short_summary.specific.laurasiatheria_odb10.horse_04_56.hap2.txt, /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_04_56.hap2/run_laurasiatheria_odb10/full_table.tsv
    output: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_04_56.hap2/busco.csv
    jobid: 23
    reason: Code has changed since last execution
    wildcards: sample=horse_04_56, phases=hap2
    resources: tmpdir=/tmp

RuleException in rule parseBUSCO in file /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/hifi_assembly_analysis_phased.smk, line 155:
NameError: The name 'phases' is unknown in this context. Did you mean 'wildcards.phases'?, when formatting the following:

    echo "Strain,Complete_single_copy,Complete_duplicated,Fragmented,Missing" > {output.buscoCSV}

    cat {input.outputSummary} | grep "(S)" | awk -v strain="{wildcards.sample}.{phases}" '{{print strain","$1}}' > {params.buscoDir}/complete_single.txt

    cat {input.outputSummary} | grep "(D)" | awk '{{print $1}}' > {params.buscoDir}/complete_duplicated.txt

    cat {input.outputSummary} | grep "(F)" | awk '{{print $1}}' > {params.buscoDir}/fragmented.txt

    cat {input.outputSummary} | grep "(M)" | awk '{{print $1}}' > {params.buscoDir}/missing.txt

    paste -d "," {params.buscoDir}/complete_single.txt {params.buscoDir}/complete_duplicated.txt {params.buscoDir}/fragmented.txt {params.buscoDir}/missing.txt >> {output.buscoCSV}

    rm {params.buscoDir}/complete_single.txt {params.buscoDir}/complete_duplicated.txt {params.buscoDir}/fragmented.txt {params.buscoDir}/missing.txt
  
