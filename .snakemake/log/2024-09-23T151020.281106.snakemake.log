Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 20
Rules claiming more threads will be scaled down.
Provided resources: mem_mb=70000
Job stats:
job                  count
-----------------  -------
all                      1
compareRef               1
de_novo_gfa_to_fa        1
initial_assembly         1
removeRagTag             1
sameChrNames             2
total                    7

Select jobs to execute...

[Mon Sep 23 15:10:22 2024]
rule sameChrNames:
    input: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_05_608/horse_05_608_rename.scaffold.fasta, /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/chr.accesssion.list.txt, /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/cleaned_ref_genome.fa
    output: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_05_608/horse_05_608_scaffold_chr.fa, /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_05_608/horse_05_608_ref_chr.fa
    jobid: 23
    reason: Missing output files: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_05_608/horse_05_608_scaffold_chr.fa, /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_05_608/horse_05_608_ref_chr.fa
    wildcards: sample=horse_05_608
    resources: tmpdir=/tmp


    horse_05_608lines=$(wc -l /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/chr.accesssion.list.txt | awk '{ print $1 }')
    horse_05_608currentline=1
    while [ "$horse_05_608currentline" -le "$horse_05_608lines" ]
    do
      horse_05_608name=$(sed "${horse_05_608currentline}q;d" /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/chr.accesssion.list.txt | awk '{ print $2 }')
      grep -A1 "${horse_05_608name}" /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_05_608/horse_05_608_rename.scaffold.fasta >> /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_05_608/horse_05_608_scaffold_chr.fa
      grep -A1 "${horse_05_608name}" /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/cleaned_ref_genome.fa >> /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_05_608/horse_05_608_ref_chr.fa
      horse_05_608currentline=$(($horse_05_608currentline+1))
    done
  

[Mon Sep 23 15:10:22 2024]
rule initial_assembly:
    input: /home/tmathieu/eNAD/fastq/horse_04_56.fastq
    output: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_04_56/horse_04_56.asm.bp.p_ctg.gfa
    jobid: 12
    reason: Missing output files: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_04_56/horse_04_56.asm.bp.p_ctg.gfa
    wildcards: sample=horse_04_56
    resources: tmpdir=/tmp, mem_mb=70000, mem_mib=66758


    mkdir -p /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_04_56
    
    #de novo assembly
    hifiasm -o /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/outputGenomes/horse_04_56/horse_04_56.asm -t 20 /home/tmathieu/eNAD/fastq/horse_04_56.fastq
  
[Mon Sep 23 15:13:33 2024]
Error in rule sameChrNames:
    jobid: 23
    input: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_05_608/horse_05_608_rename.scaffold.fasta, /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/chr.accesssion.list.txt, /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/cleaned_ref_genome.fa
    output: /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_05_608/horse_05_608_scaffold_chr.fa, /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_05_608/horse_05_608_ref_chr.fa
    shell:
        
    horse_05_608lines=$(wc -l /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/chr.accesssion.list.txt | awk '{ print $1 }')
    horse_05_608currentline=1
    while [ "$horse_05_608currentline" -le "$horse_05_608lines" ]
    do
      horse_05_608name=$(sed "${horse_05_608currentline}q;d" /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/chr.accesssion.list.txt | awk '{ print $2 }')
      grep -A1 "${horse_05_608name}" /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_05_608/horse_05_608_rename.scaffold.fasta >> /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_05_608/horse_05_608_scaffold_chr.fa
      grep -A1 "${horse_05_608name}" /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/resources/cleaned_ref_genome.fa >> /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_05_608/horse_05_608_ref_chr.fa
      horse_05_608currentline=$(($horse_05_608currentline+1))
    done
  
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Removing output files of failed job sameChrNames since they might be corrupted:
/group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_05_608/horse_05_608_scaffold_chr.fa, /group/ctbrowngrp/finnolab_shared/eNAD_PacBio/horse_05_608/horse_05_608_ref_chr.fa
[Tue Sep 24 05:07:46 2024]
Finished job 12.
1 of 7 steps (14%) done
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: .snakemake/log/2024-09-23T151020.281106.snakemake.log
